# ─────────────────────────────────────────────────────────────
# Claude Code OpenTelemetry — Environment Variables
# ─────────────────────────────────────────────────────────────
# Copy the export lines below into your ~/.zshrc or ~/.bashrc,
# then reload your shell: source ~/.zshrc
#
# Full reference: docs/env-vars.md
# ─────────────────────────────────────────────────────────────

# ── Required ──────────────────────────────────────────────────

# Enable telemetry collection (must be set to 1)
export CLAUDE_CODE_ENABLE_TELEMETRY=1

# Exporter types — "otlp" sends data to the OTel Collector
export OTEL_METRICS_EXPORTER=otlp
export OTEL_LOGS_EXPORTER=otlp

# OTLP transport protocol (grpc = port 4317, http = port 4318)
export OTEL_EXPORTER_OTLP_PROTOCOL=grpc

# Collector endpoint (change host if collector is remote)
export OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# ── Optional: Export Intervals ────────────────────────────────

# Metrics export interval in ms (default: 60000 = 60s)
# Lower values useful for debugging; reset for production.
# export OTEL_METRIC_EXPORT_INTERVAL=10000

# Logs/events export interval in ms (default: 5000 = 5s)
# export OTEL_LOGS_EXPORT_INTERVAL=5000

# ── Optional: Privacy & Content Logging ───────────────────────

# Log full user prompt content (default: disabled, only length is logged)
# export OTEL_LOG_USER_PROMPTS=1

# Log MCP server/tool names and skill names in tool events (default: disabled)
# export OTEL_LOG_TOOL_DETAILS=1

# ── Optional: Metrics Cardinality Control ─────────────────────

# Include session.id attribute in metrics (default: true)
# export OTEL_METRICS_INCLUDE_SESSION_ID=true

# Include app.version attribute in metrics (default: false)
# export OTEL_METRICS_INCLUDE_VERSION=false

# Include user.account_uuid attribute in metrics (default: true)
# export OTEL_METRICS_INCLUDE_ACCOUNT_UUID=true

# ── Optional: Authentication ──────────────────────────────────

# Static auth headers for OTLP (not needed for local stack)
# export OTEL_EXPORTER_OTLP_HEADERS="Authorization=Bearer your-token"

# ── Optional: Custom Resource Attributes ──────────────────────

# Add team/department identification (W3C Baggage format, no spaces in values)
# export OTEL_RESOURCE_ATTRIBUTES="department=engineering,team.id=platform"
